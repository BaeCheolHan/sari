# codex-forge 분석 요약 (2026-01-30)

## 1. 프로젝트 성격
- 실행 애플리케이션이 아니라 **Codex/Gemini CLI를 위한 룰셋 + 설치 스크립트 + 문서** 중심 레포다.
- 루트에 `install.sh`/`uninstall.sh`와 `README.md`, `docs/`가 핵심 엔트리다.

## 2. 핵심 목표/기능
- **Multi-CLI 지원**: Codex CLI와 Gemini CLI 모두 지원하며, 설치 시 선택 옵션 제공.
- **안전 게이트/운영 지침**: `.codex/rules/00-core.md` 등 정책 기반.
- **local-search MCP 활용**: 파일 탐색 비용 절감과 MSA 타겟팅을 위한 권장 도구.
- **문서 기반 운영**: 설치/진단/업데이트 절차가 `docs/_meta/SETUP.md`에 정본으로 정리됨.

## 3. 주요 구성요소
- `install.sh`: 설치/업데이트/구성 병합의 중심 스크립트. CLI 모드 선택(`--codex|--gemini|--all`), 기존 설치 처리(`--backup|--skip|--quit`), 소스 모드(local vs git) 전환을 제공.
- `uninstall.sh`: 제거/정리 스크립트(세부 동작은 별도 확인 필요).
- `README.md`: 빠른 시작 및 구조 요약.
- `docs/_meta/SETUP.md`: 설치/진단/업데이트/문제해결/버전 확인의 정본 문서.
- `.codex/`, `.gemini/`: 실제 CLI 설정/룰셋 설치 대상(설치 시 workspace root에 배치).

## 4. 설치/업데이트 동작 관찰
- **소스 모드**
  - `.codex` 또는 `docs`가 없으면 git에서 소스를 내려받는 모드로 전환된다.
  - 로컬에서 같은 repo에 설치하는 경우 임시 스냅샷을 만들어 자기참조 덮어쓰기 문제를 회피한다.
- **기존 설치 감지**
  - `.codex`, `docs`, `.gemini`, `AGENTS.md`, `GEMINI.md` 존재 시 backup/skip/quit 선택을 요구한다.
- **설정 보존**
  - `docs/_meta/SETUP.md` 기준으로 `.codex/config.toml`은 덮어쓰지 않고 필요한 MCP 설정만 병합하는 흐름을 안내한다.

## 5. 문서 구조 및 운영 규칙
- `.codex/AGENTS.md`와 `.codex/rules/00-core.md`가 Codex CLI의 핵심 정책 문서로 작동한다.
- `docs/_meta/CHANGELOG.md`, `docs/_meta/RELEASE_CHECKLIST.md` 등 릴리스 운영 문서가 포함되어 있다.
- `docs/_shared/**`는 glossary, lessons-learned, inbox, erd, local-search, skills, state 등 공용 문서 영역이다.

## 6. 리스크/주의사항 (현재 관찰 범위)
- `install.sh`가 다수의 분기(로컬/깃, 백업/스킵 등)를 가지므로, 버전/경로 입력 실수 시 설치 대상이 바뀔 수 있다.
- 문서/룰셋이 workspace root에 설치되는 구조이므로, workspace 경계(`.codex-root`)를 정확히 맞춰야 한다.
- `docs/_meta/PROJECT_OVERVIEW.md`는 v2.3.3 기준으로 일부 내용이 오래될 수 있다.

## 7. 확인/추가 분석 필요
- `uninstall.sh` 실제 삭제 범위와 안전장치 확인.
- `.codex/config.toml` 병합 로직의 상세 동작(install.sh 내부)과 충돌 정책.
- local-search MCP 도구들의 버전/호환성(설치 후 실제 상태 확인 필요).

## 8. 다음 단계 제안
- 설치/업데이트 플로우의 E2E 점검(실제 workspace에 설치 후 `docs/_meta/SETUP.md`의 진단 절차 수행).
- `docs/_meta/PROJECT_OVERVIEW.md` 최신화(현재 v2.3.3 → v2.4.3 맞춤 갱신).

