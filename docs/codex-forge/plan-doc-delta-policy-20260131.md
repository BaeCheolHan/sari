# 룰셋 문서-델타 정책 설계안 (2026-01-31)

## 목적
- **문서 저장 필수**는 유지하면서, **토큰/읽기 비용을 줄이고** 에이전트가 일관되게 따를 수 있는 최소 규칙을 설계한다.

## 설계 원칙
- 지식 관련 규칙은 **`02-knowledge.md`에 통합**한다. (중복 금지)
- **규칙 문구는 짧고 명령형**으로, 예외 규칙은 최소화한다.
- 문서 작성 규칙은 “작성 포맷”을 고정해 **에이전트 준수 가능성**을 높인다.

## 적용 위치 (논리 구조)
1) **지식 룰 정본**: `.codex/rules/02-knowledge.md`
   - Write Rules 섹션에 “델타 기록/중복 방지/근거 최소화” 정책 삽입
   - 기존 상한 테이블과 **통합**하여 중복 제거
2) **정본 코어**: `.codex/rules/00-core.md`
   - 변경 없음 (포인터 역할 유지)

## 문서 작성 정책 (제안 규칙 문구)
- **델타 기록 우선**: 기존 문서 재요약 금지. **신규 발견/변경점만** 추가한다.
- **중복 방지**: 동일 내용은 **링크/키워드 참조**로 대체하고 본문 재서술 금지.
- **근거 최소화**: 근거 파일은 **리스트만** 기재하고 본문 인용/재서술 금지.

## 문서 포맷 고정안 (토큰 절감용)
- 모든 문서의 신규 기록은 다음 3블록만 허용:
  1) **신규 발견**: 1~3줄
  2) **영향**: 1~2줄
  3) **다음 액션**: 1줄
- 1개 항목당 **총 6줄 이내** 유지 (초과 시 요약 필수)
- 포맷 예시는 `02-knowledge.md`의 **Write Rules 섹션에 1개만** 추가

## 링크/키워드 참조 형식 (제안)
- 경로 링크: `→ docs/api/xxx.md`
- 인덱스 참조: `[lessons:L042]`, `[debt:L015]`

## 에이전트 읽기 비용 최소화 전략
- `.codex/AGENTS.md`에는 **정본 경로만** 유지하고 추가 설명은 금지.
- 문서 포맷의 예시는 **`02-knowledge.md`에 1개만** 넣고 중복 금지.

## 변경 규모 (예상)
- 파일: 1개 (`.codex/rules/02-knowledge.md`)
- 스케일: S1 (룰 파일 변경)

## 검증 포인트
- 문서 작성 시 **재요약/재서술이 발생하지 않는지** 체크
- 근거가 리스트로만 남는지 확인
- 신규 기록이 **3블록(신규 발견/영향/다음 액션)** 포맷을 준수하는지 확인
- AGENTS 진입점이 **짧게 유지**되는지 확인

## 다음 단계
- 사용자 확인 후 규칙 파일에 문구 반영
- 문서 포맷 예시 1개만 추가
