# Feasibility: local-search + Memory/KG MCP 통합 (codex-forge)

작성일: 2026-01-31

## 결론 (요약)
- **현실성 높음**: local-search(근거 회수)와 Memory/KG(의미 연결)는 역할이 보완적이라 시너지 가능성이 큼.
- **핵심은 운영 규칙**: 무엇을 그래프에 넣고(변동 적은 사실), 무엇은 검색으로 즉시 회수할지 경계를 잘 정해야 함.
- **PoC로 검증 가능**: 최소 스키마 + 출처 저장 + 조회 플로우만으로 1~2주 내 실효성 측정 가능.

## 왜 실효적인가
1) **근거 회수 vs 의미 연결 분리**
- local-search: “어디에 있나”에 강함 (파일/경로/문맥 회수)
- Memory/KG: “무엇이 무엇과 연결되나”에 강함 (관계 추론)

2) **토큰 절감 구조**
- 그래프에서 관련 노드/관계 추출 → local-search 범위를 좁힘 → 필요한 파일만 읽음

3) **재사용성**
- 분석 결과(관계/책임/의존)를 그래프에 축적하면 다음 세션에서 즉시 회상 가능

## 현실적 한계/리스크
- **신선도 문제**: 그래프가 최신 상태를 유지하지 못하면 오히려 오류 유발
- **스키마 과잉**: 엔티티/관계를 과하게 설계하면 입력 비용만 증가
- **출처 불명**: 관계에 근거(파일/라인/커밋) 없으면 신뢰성 하락
- **자동 추출의 환각**: LLM이 추론만으로 관계를 추가하면 누적 오류 발생 위험

## 성공 조건 (운영 원칙)
- 그래프에는 **변동이 적은 사실** 위주로 저장 (소유/책임/의존/버전/정책)
- **모든 관계에 출처**를 기록 (파일 경로/라인/커밋/문서 위치)
- **그래프는 검색을 대체하지 않음**: 질문 → KG로 후보/범위 축소 → local-search로 근거 확인

## PoC 제안 (저비용 검증)
- 최소 스키마: Project, Service, Module, Team, DB, API
- 관계: OWNS, DEPENDS_ON, USES_DB, IMPLEMENTS, VERSION
- 저장 규칙: “관계는 반드시 출처 메타 포함”
- 조회 플로우: 질문 → KG search/read → local-search로 파일 확인 → 응답
- 평가 지표: 
  - 재검색 횟수 감소
  - 문맥 정확도 개선
  - 응답 시간(파일 읽기량) 감소

## 판단
- “local-search를 더 크게 키우는 방향”으로 **통합은 충분히 타당**
- 다만 성공은 **스키마 최소화 + 출처 기록 + 최신성 유지**에 달림

